{% extends "admin/base_admin.html" %}

{% block subtitle %}Detalhes da Casa{% endblock %}

{% block content %}
<div class="admin-actions">
    <a href="{% url 'admin_casas' %}" class="btn btn-back">
        <i class="fas fa-arrow-left"></i> Voltar para lista de casas
    </a>
    <div class="action-buttons">
        <a href="{% url 'admin_casa_editar' casa.id %}" class="btn-edit">
            <i class="fas fa-edit"></i> Editar
        </a>
        <a href="{% url 'admin_casa_excluir' casa.id %}" class="btn-delete" onclick="return confirm('Tem certeza que deseja excluir esta casa?')">
            <i class="fas fa-trash"></i> Excluir
        </a>
    </div>
</div>

<div class="house-details">
    <div class="house-header">
        <h2>{{ casa.titulo }}</h2>
        <span class="house-id">ID: {{ casa.id }}</span>
    </div>
    
    <div class="house-gallery">
        <div class="main-image">
            {% if casa.imagem_principal %}
            <img src="{{ casa.imagem_principal.url }}" alt="{{ casa.titulo }}">
            {% else %}
            <div class="no-image">Sem imagem principal</div>
            {% endif %}
        </div>
        
        {% if casa.imagens.all %}
        <div class="image-gallery">
            {% for imagem in casa.imagens.all %}
            <div class="gallery-item">
                <img src="{{ imagem.imagem.url }}" alt="{{ casa.titulo }} - Imagem {{ forloop.counter }}">
            </div>
            {% endfor %}
        </div>
        {% endif %}
    </div>
    
    <div class="house-info-card">
        <h3>Informações da Casa</h3>
        <div class="house-info-content">
            <div class="info-item">
                <span class="info-label">Título:</span>
                <span class="info-value">{{ casa.titulo }}</span>
            </div>
            <div class="info-item">
                <span class="info-label">Proprietário:</span>
                <span class="info-value">
                    <a href="{% url 'admin_usuario_detalhes' casa.owner.id %}">
                        {{ casa.owner.first_name }} {{ casa.owner.last_name }}
                    </a>
                </span>
            </div>
            <div class="info-item">
                <span class="info-label">Endereço:</span>
                <span class="info-value">{{ casa.endereco }}</span>
            </div>
            <div class="info-item">
                <span class="info-label">Tipo:</span>
                <span class="info-value">{{ casa.tipo }}</span>
            </div>
            <div class="info-item">
                <span class="info-label">Preço Mensal:</span>
                <span class="info-value">R$ {{ casa.preco_mes }}</span>
            </div>
            <div class="info-item">
                <span class="info-label">Capacidade Máxima:</span>
                <span class="info-value">{{ casa.capacidade_máxima }} pessoas</span>
            </div>
            <div class="info-item">
                <span class="info-label">Data de Cadastro:</span>
                <span class="info-value">{{ casa.data_cadastro|date:"d/m/Y H:i" }}</span>
            </div>
            <div class="info-item">
                <span class="info-label">Contato:</span>
                <span class="info-value">{{ casa.contato }}</span>
            </div>
        </div>
    </div>
    
    <div class="house-description-card">
        <h3>Descrição</h3>
        <div class="description-content">
            {{ casa.descricao|linebreaks }}
        </div>
    </div>
</div>
{% endblock %}